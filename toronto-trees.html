<!DOCTYPE html>
<html lang="en">

<head>
    <title>toronto-map</title>
    <meta property="og:description" content="Toronto Map" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/maplibre-gl@5.1.0/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@5.1.0/dist/maplibre-gl.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="map-wrapper">
            <div id="map"></div>
        </div>
    </div>

    <script>

        const torontoBounds = [[-79.6393, 43.5804], [-79.1158, 43.8554]];

        const map = new maplibregl.Map({
            container: "map",
            style: "toronto-trees.json",
            center: [-79.38245, 43.67831],
            maxBounds: torontoBounds,
            zoom: 12,
            minZoom: 12,
            maxZoom: 16,
            bearing: -16,
            pitch: 25,
            hash: true,
            pixelRatio: 2
        });

        map.on("load", () => {
            
            // Add tree source
            map.addSource('toronto_trees', {
                type: 'vector',
                tiles: ['https://geographyclub.github.io/toronto-map/data/toronto_trees/{z}/{x}/{y}.pbf']
            });

            // Add tree points
            map.addLayer({
                id: 'neighborhoods-labels',
                type: 'symbol',
                source: 'toronto_neighborhoods_centroids',
                layout: {
                    'text-field': ['get', 'area_name'],
                    'text-size': ['interpolate', ['exponential', 1.1], ['zoom'], 10, 1, 18, 50],
                    'text-font': ['montserrat-regular'],
                    'text-max-width': 5,
                    'text-line-height': 1,
                    'text-allow-overlap': true,
                    'text-ignore-placement': true,
                    //'text-variable-anchor': ['top', 'bottom', 'left', 'right'],
                    'text-rotation-alignment': 'viewport',
                    'text-pitch-alignment': 'viewport'
                },
                paint: {
                    'text-color': 'hsl(227, 89%, 90%)',
                    'text-opacity': ['interpolate', ['linear'], ['zoom'], 11, 0, 12, 0.8, 14, 0.8, 16, 0]
                },
                "minzoom": 11,
                "maxzoom": 16
            });

        });

    </script>

</body>

</html>